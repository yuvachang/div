(this["webpackJsonpdivvi-web"]=this["webpackJsonpdivvi-web"]||[]).push([[0],{16:function(e,t,a){e.exports=a(27)},27:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),c=a.n(o),s=a(3),i=a(10),u=a.n(i),l=a(14),m=a(2),d=a(1),p=a(4),b=function(e,t){return{type:"UPDATE_SUBTOTAL",payload:{subtotal:e,total:t}}},f=function(){return{type:"CLEAR_TIPTAX"}},O=function(e,t){return{type:"UPDATE_TAX",payload:{tax:e,total:t}}},v=function(e,t){return{type:"UPDATE_TIP",payload:{tip:e,total:t}}},y=function(e){return{type:"TOTALS_USE_LOCALSTORAGE",payload:e}},g=function(e){return n.a.createElement("input",{className:e.disabled?"top no-hover":"top",type:"number",name:e.name,onChange:e.onChange,value:e.val,onBlur:e.updateStore,onKeyDown:function(e){var t=e.target,a=e.keyCode,r=t.value;190!==a&&110!==a||(console.log(r,"hello"),!r.includes("."))?8!==a&&46!==a&&(a<37||a>40&&a<48||a>57&&a<97||a>105&&a<110||a>110&&a<190||a>190)&&(e.preventDefault(),13===a&&t.blur()):e.preventDefault()},disabled:e.disabled})};g.defaultProps={disabled:!1,updateStore:function(){}};var E=g,j=function(e){var t=new Date(e),a=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"][t.getDay()],r="".concat(t.getDate());1===r.length&&(r=r.padStart(2,"0"));var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o="".concat(t.getFullYear());return"".concat(a," ").concat(n," ").concat(r," ").concat(o)},w=function(e){return+(Math.round(100*+e)/100).toFixed(2)},h=function(e){var t=e.split(" ").filter((function(e){return!!e.length}));return t.length?1===t.length?t[0][0].toUpperCase():t[0][0].toUpperCase().concat(t[t.length-1][0].toUpperCase()):""},S=function(e){var t=e.trim().split(" ");return t[0].length>10&&(t[0]=t[0].slice(0,10)+"(...)"),t=t[0]+" "+h(t.join(" ")).slice(1)},N=function(e){return{type:"USERS_USE_LOCALSTORAGE",payload:e}},P=function(e){return{type:"USERS_ADD",payload:{user:{uid:Math.random().toString(36).substr(2,9),name:"",oweAmount:0,paid:0,isCustomOweAmt:!1},total:e}}},D=function(e,t){return{type:"USERS_DELETE",payload:{uid:e,total:t}}},A=function(e,t){return{type:"USERS_NAME",payload:{name:e,uid:t}}},C=function(e,t,a){return{type:"USERS_PAID",payload:{paid:e,uid:t,total:a}}},x=function(e,t,a){return{type:"USERS_OWE",payload:{oweAmount:e,uid:t,total:a}}},T=function(e,t){return{type:"USERS_TOGGLECUSTOWE",payload:{isCustomOweAmt:e,uid:t}}},U=function(e){return{type:"CALC_OWES",payload:{total:e}}},k=function(){return{type:"USERS_SETCOLORS",payload:null}};function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=Object(p.b)((function(e,t){return{totals:e.totals}}),(function(e,t){return{updateSubTotal:Object(d.a)(b,e),updateTip:Object(d.a)(v,e),updateTax:Object(d.a)(O,e),clearTipTax:Object(d.a)(f,e),updateUserDebts:Object(d.a)(U,e)}}))((function(e){var t=Object(r.useState)(e.totals),a=Object(m.a)(t,2),o=a[0],c=a[1],i=Object(r.useState)(!0),u=Object(m.a)(i,2),l=u[0],d=u[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),f=b[0],O=b[1],v=function(t){var a,r=t.target,n=r.value,i=r.name;if(+(n="subtotal"===i||"total"===i?+n>0?w(+n).toFixed(2):"0":String((a=+n,+(Math.round(10*+a)/10).toFixed(1))))===e.totals[i])c(L({},o,Object(s.a)({},i,n)));else{var u=L({},o);u[i]=n;var l=function(e){var t=e.tip,a=e.tax,r=e.subtotal,n=Number(t)/100*Number(r)+Number(a)/100*Number(r)+Number(r);return n>0?n.toFixed(2):"0"}(u);u.total=l,e.updateUserDebts(+l);var m=l===u.subtotal;switch(m||f?m&&f&&O(!1):O(!0),c(L({},u)),i){case"subtotal":e.updateSubTotal(n,l);break;case"tip":e.updateTip(n,l);break;case"tax":e.updateTax(n,l)}e.formHasData||e.setFormHasData(!0)}},y=function(e){var t=e.target,a=t.value;c(L({},o,Object(s.a)({},t.name,a)))};return Object(r.useEffect)((function(){e.totals.useLS&&(console.log("using LS data"),e.totals.total!==e.totals.subtotal&&O(!0),c(e.totals))}),[e.totals.useLS]),n.a.createElement("div",{className:"top-half"},n.a.createElement("div",null,n.a.createElement("div",{className:"segment"},n.a.createElement("p",null,l?"T":"Sub-t","otal"),n.a.createElement("div",{className:"symbol greytext"},"$"),l&&f?n.a.createElement(E,{name:"total",onChange:y,val:o?o.total:0,updateStore:v,disabled:!0}):n.a.createElement(E,{name:"subtotal",onChange:function(e){return y(e)},val:o?o.subtotal:0,updateStore:v}))),n.a.createElement("div",{className:"grey-button-container"},n.a.createElement("div",{className:"grey-button",onClick:function(){return d(!l)}},l?f?"edit amounts":"include tips & tax":"hide tips & tax")),n.a.createElement("div",{className:"total-details".concat(l?" collapsed":f?" include-clear-button":"")},n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Tip (",e.totals.subtotal>0&&e.totals.tip>0?"$".concat((e.totals.tip/100*e.totals.subtotal).toFixed(2)):"$0",")"),n.a.createElement("div",{className:"symbol right greytext"},"%"),n.a.createElement(E,{name:"tip",onChange:y,val:o?o.tip:0,updateStore:v})),n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Tax (",e.totals.subtotal>0&&e.totals.tax>0?"$".concat((e.totals.tax/100*e.totals.subtotal).toFixed(2)):"$0",")"),n.a.createElement("div",{className:"symbol right greytext"},"%"),n.a.createElement(E,{name:"tax",onChange:y,val:o?o.tax:0,updateStore:v})),f&&n.a.createElement("div",{className:"grey-button-container"},n.a.createElement("div",{className:"grey-button tiny",style:{width:"50%",height:"14px"},onClick:function(){var t;t=0;var a=L({},o,{tip:t,tax:0,total:o.subtotal});c(L({},o,{},a)),O(!1),e.clearTipTax()}},"clear tip & tax")),n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Total"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement(E,{name:"total",onChange:y,val:o?o.total:0,updateStore:v,disabled:!0}))))})),I=function(e){var t=e.yes,a=e.no,r=e.msg,o=e.userItem;return n.a.createElement("div",{className:o?"modal-user":"modal"},n.a.createElement("div",{className:"modal-center"},r,n.a.createElement("div",{className:"modal-buttons"},n.a.createElement("button",{onClick:t},"Yes"),n.a.createElement("button",{onClick:a},"No"))))},F=a(8);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=Object(p.b)((function(e,t){return{total:e.totals.total,users:e.users.users}}),(function(e,t){return{updateName:Object(d.a)(A,e),updatePaid:Object(d.a)(C,e),updateUserOweAmt:Object(d.a)(x,e),toggleCustOweAmt:Object(d.a)(T,e),calcOweAmounts:Object(d.a)(U,e)}}))((function(e){var t=Object(r.useState)(M({},e.user)),a=Object(m.a)(t,2),o=a[0],c=a[1],i=function(t,a){switch(t){case"name":a=function(e){var t=e.split(" ").filter((function(e){return!!e.length}));return t.length?t.map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):""}(a),e.updateName(a,o.uid);break;case"paid":var r=Object.keys(e.users).filter((function(e){return e!==o.uid})).reduce((function(t,a){return t+e.users[a].paid}),0),n=e.total-r;+a>n&&(a=n.toFixed(2)),e.user.paid!==+a&&e.updatePaid(String(w(+a)),o.uid,e.total),a=w(+a).toFixed(2);break;case"oweAmount":e.updateUserOweAmt(String(w(+a)),o.uid,e.total),a=w(+a).toFixed(2)}return 0===+a?"name"===t?"":"0":a},u=function(e){var t=e.target,a=t.value;c(M({},o,Object(s.a)({},t.name,a)))},l=function(e){var t=e.target,a=t.value;a=i(t.name,a),c(M({},o,Object(s.a)({},t.name,a)))},d=function(e){var t=e.target,a=e.which||e.keyCode;"name"===t.name&&(a>=97&&a<=105||a>=48&&a<=57)?e.preventDefault():190!==e.keyCode&&110!==e.keyCode||!t.value.includes(".")?13===e.keyCode&&t.blur():e.preventDefault()};return n.a.createElement("div",{className:"user-item-inputs"},n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Name:"),n.a.createElement("input",{className:"bottom",autoComplete:"whatever",type:"text",name:"name",value:o.name||"",onChange:u,onBlur:l,onKeyDown:d,spellCheck:!1})),n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Paid:"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement("input",{className:"bottom",type:"number",name:"paid",value:o.paid||0,onChange:u,onBlur:l,onKeyDown:d})),n.a.createElement("div",{className:"grey-button-container",style:{marginBottom:"5px",justifyContent:"flex-end"}},n.a.createElement("div",{className:"grey-button tiny",onClick:function(){var e=i("paid",String(1/0));c(M({},o,{paid:+e}))}},"pay remaining total"),n.a.createElement("div",{style:{width:"20%"},className:"grey-button tiny",onClick:function(){var e=i("paid","0");c(M({},o,{paid:+e}))}}," ","clear paid")),n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Balance:"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement("input",{className:"bottom ".concat(o.isCustomOweAmt?"":"no-hover"),type:"number",name:"oweAmount",value:o.isCustomOweAmt?o.oweAmount:e.user.oweAmount||0,onChange:u,onBlur:l,onKeyDown:d,disabled:!o.isCustomOweAmt}),n.a.createElement("div",{className:"button"},n.a.createElement("img",{alt:"edit/clear",src:o.isCustomOweAmt?"/icons/remove.svg":"/icons/lock.svg",className:"arrowicon",onClick:function(){var t=!o.isCustomOweAmt;e.toggleCustOweAmt(t,e.user.uid),e.calcOweAmounts(e.total),c(M({},o,{isCustomOweAmt:t,oweAmount:e.user.oweAmount}))},title:o.isCustomOweAmt?"clear":"unlock to edit"}))))}));function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=function(e){var t=Object(r.useState)(!0),a=Object(m.a)(t,2),o=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(m.a)(s,2),u=i[0],l=i[1],d=function(){l(!1)};return Object(r.useEffect)((function(){e.user.name||c(!1)}),[]),Object(r.useEffect)((function(){e.usersOpen||c(!0)}),[e.usersOpen]),n.a.createElement("div",{className:"user-item ".concat(function(){var t=e.user.oweAmount,a=e.user.paid,r=e.total;return(!!e.user.isCustomOweAmt||r>0)&&a>=t&&(a>0||t>0)}()?"debt-settled":"")},n.a.createElement("div",{className:"color-bar",style:{backgroundColor:e.user.color}}),n.a.createElement("div",{className:"no-edit".concat(o?" collapsed":"")},n.a.createElement("div",{className:"name greytext"},e.user.name||"Name"),n.a.createElement("div",{className:"amounts"},"Paid: $",e.user.paid),n.a.createElement("div",{className:"amounts"},"Bal: $",e.user.oweAmount),n.a.createElement("div",{className:"arrow",onClick:function(){o?(e.checkUserOpen(),c(!1)):(e.checkUserOpen(),c(!0))}},n.a.createElement("img",{src:"/icons/down-arrow.png",alt:"open/close",className:"arrowicon".concat(o?"":" flip")}))),n.a.createElement("div",{className:"edits".concat(o?" collapsed":"")},n.a.createElement($,{user:W({},e.user)}),n.a.createElement("div",{className:"grey-button-container",style:{marginTop:"5px"}},n.a.createElement("div",{className:"grey-button tiny red",onClick:function(){e.user.name||e.user.paid||e.user.isCustomOweAmt&&e.user.oweAmount?l(!0):e.deleteUser()}},"Delete Person"))),u&&n.a.createElement(I,{yes:function(){e.deleteUser(),d()},no:function(){return d()},msg:"Delete ".concat(e.user.name?e.user.name:"person","?"),userItem:!0}))};function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var H=function(e){var t=Object(r.useState)(!0),a=Object(m.a)(t,2),o=a[0],c=a[1],i=Object(r.useState)([]),u=Object(m.a)(i,2),l=u[0],d=u[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),f=b[0],O=b[1],v=Object(r.useState)(25),y=Object(m.a)(v,2),g=y[0],E=y[1];Object(r.useEffect)((function(){l.length&&f?f&&(!l.length||e.users[l[0].ownerUID]&&e.users[l[0].payToUID]||w(!0)):w(!0)}),[e.debts,e.users]);var j=function(e){var t=20*e+20;e||(t=35),t!==g&&E(t)},w=function(t){var a=[];if(Object.keys(e.debts).forEach((function(t){var r=S(e.users[t].name),n=e.users[t].color,o=e.debts[t].map((function(t){var a=S(e.users[t.payToUID].name);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{debtor:r,debtee:a,color:n})}));a=a.concat(o)})),!t)return a;f&&O(!1),d(a),j(a.length)},h=function(e){!e&&o?c(!1):e&&!o&&c(!0)},N=Object(r.useRef)(null);return e.initials.length?n.a.createElement("div",{className:"debts-and-bubbles"},n.a.createElement("div",{className:"user-bubbles"},e.initials.map((function(t,a){return n.a.createElement("div",{className:"bubble",style:{border:"1px solid ".concat(e.users[t.uid].color),backgroundColor:"#f4f4f4"},key:a+"init",onClick:function(){return function(e){if(o&&c(!1),f){var t=w(!1).filter((function(t){return t.ownerUID===e}));d(t),j(t.length)}else{O(!0);var a=l.filter((function(t){return t.ownerUID===e}));d(a),j(a.length)}}(t.uid)}},t.init?t.init:"na")})),n.a.createElement("div",{className:"grey-button-container",style:{width:"".concat(e.initials.length>6?"100%":"108px"),margin:"2px"}},n.a.createElement("div",{className:"grey-button tiny",style:{width:"100%",marginTop:"".concat(e.initials.length>6?"7px":"0")},onClick:function(){w(!0),h(!1)}},"show all debts"))),n.a.createElement("div",{className:"debts ".concat(o?"collapsed":""),style:o?{}:{height:"".concat(g,"px")},ref:N},l.length?l.map((function(e){return n.a.createElement("div",{className:"debt",key:e.ownerUID+e.payToUID+e.amount},n.a.createElement("div",{style:{backgroundColor:e.color,borderRadius:"50%",width:"10px",height:"10px",marginRight:"8px"}}),e.debtor," : pay ",e.debtee," $",e.amount.toFixed(2))})):f?n.a.createElement("div",{className:"small-text"},"No individual debts."):n.a.createElement("div",{className:"small-text",style:{width:"80%",alignSelf:"flex-start",marginLeft:"12px"}},"Add paid amounts more than owed amounts to start building debts between users..."),n.a.createElement("div",{className:"closebutton"},n.a.createElement("img",{className:"iconbutton",src:"/icons/remove.svg",alt:"close section",onClick:function(){return h(!0)}})))):null};function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=Object(p.b)((function(e,t){return{users:e.users.users,debts:e.users.debts,total:e.totals.total,initials:e.users.initials}}),(function(e,t){return{addUser:Object(d.a)(P,e),deleteUser:Object(d.a)(D,e),setColors:Object(d.a)(k,e)}}))((function(e){var t=Object.keys(e.users).map((function(t){return e.users[t]})),a=Object(r.useState)(!0),o=Object(m.a)(a,2),c=o[0],s=o[1],i=Object(r.useState)([]),u=Object(m.a)(i,2),l=(u[0],u[1],function(){window.setTimeout((function(){var e=document.getElementsByClassName("no-edit");(e=Object(F.a)(e).filter((function(e){return"no-edit"===e.className}))).length?s(!0):s(!1)}),150)});return n.a.createElement("div",{className:"bottom-half"},n.a.createElement(H,{users:e.users,debts:e.debts,initials:e.initials,total:e.total}),!!t.length&&n.a.createElement("div",{className:"grey-button-container",style:{width:"100%",margin:"".concat(c?"5px 2px":"0"),transition:"0.2s"}},n.a.createElement("div",{className:"grey-button tiny",style:{width:"100%",height:"".concat(c?"14px":"0"),transition:"0.2s"},onClick:function(){s(!1)}},"Collapse all users")),!!t.length&&t.map((function(t,a){return n.a.createElement(G,{usersOpen:c,checkUserOpen:l,key:t.uid,deleteUser:function(){return e.deleteUser(t.uid,e.total)},user:V({},t),total:e.total})})),n.a.createElement("div",{className:"user-item button",onClick:function(){return e.addUser(e.total)}},"add person"))}));function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=Object(p.b)((function(e,t){return{totals:e.totals,users:e.users}}),(function(e,t){return{useLocalStorageTotals:Object(d.a)(y,e),useLocalStorageUsers:Object(d.a)(N,e)}}))((function(e){var t=Object(r.useState)("date not found"),a=Object(m.a)(t,2),o=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(m.a)(s,2),d=i[0],p=i[1],b=Object(r.useState)(!1),f=Object(m.a)(b,2),O=f[0],v=f[1],y=Object(r.useState)(""),g=Object(m.a)(y,2),E=g[0],w=g[1],h=Object(r.useState)("no data"),S=Object(m.a)(h,2),N=S[0],P=S[1],D=function(){localStorage.removeItem("divviweb"),c("date not found"),v(!1)};Object(r.useEffect)((function(){var e=localStorage.getItem("divviweb");if("string"===typeof e){P(e);var t=JSON.parse(e).date;c(j(t)),v(!0)}}),[]);var A=function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C(),a=new Blob([t],{type:"application/json"}),r=document.createElement("a"),e.next=5,URL.createObjectURL(a);case 5:r.href=e.sent,r.download="backup.json",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var t={totals:z({},e.totals),users:z({},e.users),date:(new Date).getTime()};return JSON.stringify(t)};return window.onbeforeunload=function(){(d||Object.keys(e.users.users).length)&&localStorage.setItem("divviweb",C())},n.a.createElement("div",{className:"app"},O&&n.a.createElement(I,{yes:function(){if("no data"!==N){var t=JSON.parse(N),a=t.totals,r=t.users,n=Object.keys(a).length,o=Object.keys(e.totals).length,c=r.initials.length,s=Object.keys(r.users).length;if(n!==o||c!==s)return void w("Data corrupt");e.useLocalStorageTotals(a),e.useLocalStorageUsers(r),p(!0),D()}},no:D,msg:"Use session from ".concat(o,"?")}),E&&n.a.createElement("h1",null,E),n.a.createElement("div",{className:"app-card"},n.a.createElement("div",{className:"app-title"},"Divvi"),n.a.createElement(R,{formHasData:d,setFormHasData:function(e){return p(e)}}),n.a.createElement(Y,null),d&&n.a.createElement("div",{style:{width:"100%",borderBottom:"1px solid #666666"}}),d&&n.a.createElement("div",{className:"small-text hover",onClick:A},"Export data to file"),n.a.createElement("input",{type:"file",id:"uploadfile",onChange:function(e){return function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){var t=e.target.result,a=JSON.parse(t).date;c(j(a)),P(t),v(!0)},a.readAsText(t)}(e)}}),n.a.createElement("label",{htmlFor:"uploadfile",className:"small-text hover",style:{paddingTop:"0px"}},"Upload saved data")))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te=function(e,t,a){var r=ee({},e.users[a.uid]);switch(t){case"name":r.name=a.name;break;case"oweAmount":r.oweAmount=+a.oweAmount;break;case"paid":r.paid=+a.paid;break;case"isCustomOweAmt":r.isCustomOweAmt=a.isCustomOweAmt}var n=ee({},e.users);return n[a.uid]=r,ee({},e,{users:n})},ae=function(e,t){var a=ee({},e),r=Object.keys(e.users).map((function(t){return e.users[t]})),n=t-r.reduce((function(e,t){return t.isCustomOweAmt?e+Number(t.oweAmount):e+0}),0),o=r.filter((function(e){return!e.isCustomOweAmt}));return r.forEach((function(e){e.isCustomOweAmt||(a.users[e.uid].oweAmount=n>0?+(n/o.length).toFixed(2):0)})),a},re=function(e){return Object.keys(e.users).map((function(t){return e.users[t]})).map((function(e){return{uid:e.uid,init:h(e.name)}}))},ne=function(e,t){var a=ee({},e),r={},n=Object.keys(a.users),o=[],c=[];if(n.forEach((function(e){var t=ee({},a.users[e]);if(t.paid>t.oweAmount){var r=t.paid-t.oweAmount;o.push({owed:r,uid:t.uid})}else t.oweAmount>0&&t.paid<t.oweAmount&&c.push(t)})),!o.length)return ee({},a,{debts:{}});var s=function(e,t){r[t]?r[t].push(e):r[t]=[e]};return c.forEach((function(e){for(var t=e.oweAmount;t>0;){if(!o.length)return;var a=o[0].owed;if(t<=a){o[0].owed=a-t;var r={ownerUID:e.uid,payToUID:o[0].uid,amount:+t.toFixed(2)};s(r,e.uid),o[0].owed<=0&&o.shift(),t=0}else if(t>a){var n={ownerUID:e.uid,payToUID:o[0].uid,amount:+a.toFixed(2)};s(n,e.uid),t-=a,o.shift()}}})),a.debts=r,a},oe=function(e,t){var a=Object.keys(e.users),r=ee({},e),n=360/a.length;return t?r.users[t].color="hsla("+Math.floor(n%Math.floor(360*Math.random()))+", 90%, 60%,1)":a.forEach((function(e){r.users[e].color="hsla("+Math.floor(n%360)+", 90%, 60%,1)",n+=360/a.length})),r};function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie={initials:[],users:{},debts:{}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"USERS_USE_LOCALSTORAGE":return se({},e,{},r);case"USERS_ADD":var n=se({},e.users);n[r.user.uid]=r.user;var o=se({},e,{users:n});o=ae(o,r.total);var c=re(o);return o=ne(o,r.total),se({},o=oe(o),{initials:c});case"USERS_DELETE":var s=se({},e.users);delete s[r.uid];var i=se({},e,{users:s});i=ae(i,r.total);var u=re(i);return i=ne(i,r.total),se({},i=oe(i),{initials:u});case"USERS_NAME":var l=te(e,"name",r),m=re(l);return se({},l,{initials:m});case"USERS_PAID":var d=te(e,"paid",r);return se({},d=ne(d,r.total));case"USERS_OWE":var p=te(e,"oweAmount",r);return p=ae(p,r.total),se({},p=ne(p,r.total));case"USERS_TOGGLECUSTOWE":var b=te(e,"isCustomOweAmt",r);return b=ae(b,r.total),se({},b=ne(b,r.total));case"CALC_OWES":var f=ae(e,r.total);return se({},f=ne(f,r.total));case"USERS_SETCOLORS":var O=oe(e);return se({},O);default:return e}};function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var de={subtotal:0,tip:0,tax:0,total:0,useLS:!1},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"UPDATE_SUBTOTAL":return me({},e,{subtotal:+r.subtotal,total:+r.total});case"UPDATE_TIP":return me({},e,{tip:+r.tip,total:+r.total});case"UPDATE_TAX":return me({},e,{tax:+r.tax,total:+r.total});case"CLEAR_TIPTAX":return me({},e,{tip:0,tax:0,total:+e.subtotal});case"TOTALS_USE_LOCALSTORAGE":return me({},e,{},r,{useLS:!0});default:return e}},be=Object(d.b)({users:ue,totals:pe}),fe=Object(d.c)(be,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(n.a.createElement(p.a,{store:fe},n.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.c1802100.chunk.js.map