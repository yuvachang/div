(this["webpackJsonpdivvi-web"]=this["webpackJsonpdivvi-web"]||[]).push([[0],{15:function(e,t,a){e.exports=a(26)},26:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),s=a.n(o),c=a(2),u=a(9),i=a.n(u),l=a(13),m=a(3),d=a(1),p=a(4),b=function(e,t){return{type:"UPDATE_SUBTOTAL",payload:{subtotal:e,total:t}}},f=function(){return{type:"CLEAR_TIPTAX"}},O=function(e,t){return{type:"UPDATE_TAX",payload:{tax:e,total:t}}},v=function(e,t){return{type:"UPDATE_TIP",payload:{tip:e,total:t}}},y=function(e){return{type:"TOTALS_USE_LOCALSTORAGE",payload:e}},g=function(e){return n.a.createElement("input",{className:e.disabled?"top no-hover":"top",type:"number",name:e.name,onChange:e.onChange,value:e.val,onBlur:e.updateStore,onKeyDown:function(e){var t=e.target,a=e.keyCode,r=t.value;190!==a&&110!==a||(console.log(r,"hello"),!r.includes("."))?8!==a&&46!==a&&(a<37||a>40&&a<48||a>57&&a<97||a>105&&a<110||a>110&&a<190||a>190)&&(e.preventDefault(),13===a&&t.blur()):e.preventDefault()},disabled:e.disabled})};g.defaultProps={disabled:!1,updateStore:function(){}};var E=g,j=function(e){var t=new Date(e),a=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"][t.getDay()],r="".concat(t.getDate());1===r.length&&(r=r.padStart(2,"0"));var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o="".concat(t.getFullYear());return"".concat(a," ").concat(n," ").concat(r," ").concat(o)},w=function(e){return+(Math.round(100*+e)/100).toFixed(2)},h=function(e){var t=e.split(" ").filter((function(e){return!!e.length}));return t.length?1===t.length?t[0][0].toUpperCase():t[0][0].toUpperCase().concat(t[t.length-1][0].toUpperCase()):""},S=function(e){var t=e.trim().split(" ");return t[0].length>10&&(t[0]=t[0].slice(0,10)+"(...)"),t=t[0]+" "+h(t.join(" ")).slice(1)},N=function(e){return{type:"USERS_USE_LOCALSTORAGE",payload:e}},P=function(e){return{type:"USERS_ADD",payload:{user:{uid:Math.random().toString(36).substr(2,9),name:"",oweAmount:0,paid:0,isCustomOweAmt:!1},total:e}}},D=function(e,t){return{type:"USERS_DELETE",payload:{uid:e,total:t}}},A=function(e,t){return{type:"USERS_NAME",payload:{name:e,uid:t}}},C=function(e,t,a){return{type:"USERS_PAID",payload:{paid:e,uid:t,total:a}}},x=function(e,t,a){return{type:"USERS_OWE",payload:{oweAmount:e,uid:t,total:a}}},T=function(e,t){return{type:"USERS_TOGGLECUSTOWE",payload:{isCustomOweAmt:e,uid:t}}},U=function(e){return{type:"CALC_OWES",payload:{total:e}}},k=function(){return{type:"USERS_SETCOLORS",payload:null}};function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=Object(p.b)((function(e,t){return{totals:e.totals}}),(function(e,t){return{updateSubTotal:Object(d.a)(b,e),updateTip:Object(d.a)(v,e),updateTax:Object(d.a)(O,e),clearTipTax:Object(d.a)(f,e),updateUserDebts:Object(d.a)(U,e)}}))((function(e){var t=Object(r.useState)(e.totals),a=Object(m.a)(t,2),o=a[0],s=a[1],u=Object(r.useState)(!0),i=Object(m.a)(u,2),l=i[0],d=i[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),f=b[0],O=b[1],v=function(t){var a,r=t.target,n=r.value,u=r.name;if(+(n="subtotal"===u||"total"===u?+n>0?w(+n).toFixed(2):"0":String((a=+n,+(Math.round(10*+a)/10).toFixed(1))))===e.totals[u])s(L({},o,Object(c.a)({},u,n)));else{var i=L({},o);i[u]=n;var l=function(e){var t=e.tip,a=e.tax,r=e.subtotal,n=Number(t)/100*Number(r)+Number(a)/100*Number(r)+Number(r);return n>0?n.toFixed(2):"0"}(i);i.total=l,e.updateUserDebts(+l);var m=l===i.subtotal;switch(m||f?m&&f&&O(!1):O(!0),s(L({},i)),u){case"subtotal":e.updateSubTotal(n,l);break;case"tip":e.updateTip(n,l);break;case"tax":e.updateTax(n,l)}e.formHasData||e.setFormHasData(!0)}},y=function(e){var t=e.target,a=t.value;s(L({},o,Object(c.a)({},t.name,a)))};return Object(r.useEffect)((function(){e.totals.useLS&&(console.log("using LS data"),e.totals.total!==e.totals.subtotal&&O(!0),s(e.totals))}),[e.totals.useLS]),n.a.createElement("div",{className:"top-half"},n.a.createElement("div",null,n.a.createElement("div",{className:"segment"},n.a.createElement("p",null,l?"T":"Sub-t","otal"),n.a.createElement("div",{className:"symbol greytext"},"$"),l&&f?n.a.createElement(E,{name:"total",onChange:y,val:o?o.total:0,updateStore:v,disabled:!0}):n.a.createElement(E,{name:"subtotal",onChange:function(e){return y(e)},val:o?o.subtotal:0,updateStore:v}))),n.a.createElement("div",{className:"grey-button-container"},n.a.createElement("div",{className:"grey-button",onClick:function(){return d(!l)}},l?f?"edit amounts":"include tips & tax":"hide tips & tax")),n.a.createElement("div",{className:"total-details".concat(l?" collapsed":f?" include-clear-button":"")},n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Tip (",e.totals.subtotal>0&&e.totals.tip>0?"$".concat((e.totals.tip/100*e.totals.subtotal).toFixed(2)):"$0",")"),n.a.createElement("div",{className:"symbol right greytext"},"%"),n.a.createElement(E,{name:"tip",onChange:y,val:o?o.tip:0,updateStore:v})),n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Tax (",e.totals.subtotal>0&&e.totals.tax>0?"$".concat((e.totals.tax/100*e.totals.subtotal).toFixed(2)):"$0",")"),n.a.createElement("div",{className:"symbol right greytext"},"%"),n.a.createElement(E,{name:"tax",onChange:y,val:o?o.tax:0,updateStore:v})),f&&n.a.createElement("div",{className:"grey-button-container"},n.a.createElement("div",{className:"grey-button tiny",style:{width:"50%",height:"14px"},onClick:function(){var t;t=0;var a=L({},o,{tip:t,tax:0,total:o.subtotal});s(L({},o,{},a)),O(!1),e.clearTipTax()}},"clear tip & tax")),n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Total"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement(E,{name:"total",onChange:y,val:o?o.total:0,updateStore:v,disabled:!0}))))})),I=function(e){var t=e.yes,a=e.no,r=e.msg,o=e.userItem;return n.a.createElement("div",{className:o?"modal-user":"modal"},n.a.createElement("div",{className:"modal-center"},r,n.a.createElement("div",{className:"modal-buttons"},n.a.createElement("button",{onClick:t},"Yes"),n.a.createElement("button",{onClick:a},"No"))))};function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=Object(p.b)((function(e,t){return{total:e.totals.total,users:e.users.users}}),(function(e,t){return{updateName:Object(d.a)(A,e),updatePaid:Object(d.a)(C,e),updateUserOweAmt:Object(d.a)(x,e),toggleCustOweAmt:Object(d.a)(T,e),calcOweAmounts:Object(d.a)(U,e)}}))((function(e){var t=Object(r.useState)(M({},e.user)),a=Object(m.a)(t,2),o=a[0],s=a[1],u=function(t,a){switch(t){case"name":a=function(e){var t=e.split(" ").filter((function(e){return!!e.length}));return t.length?t.map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):""}(a),e.updateName(a,o.uid);break;case"paid":var r=Object.keys(e.users).filter((function(e){return e!==o.uid})).reduce((function(t,a){return t+e.users[a].paid}),0),n=e.total-r;+a>n&&(a=n.toFixed(2)),e.user.paid!==+a&&e.updatePaid(String(w(+a)),o.uid,e.total),a=w(+a).toFixed(2);break;case"oweAmount":e.updateUserOweAmt(String(w(+a)),o.uid,e.total),a=w(+a).toFixed(2)}return 0===+a?"name"===t?"":"0":a},i=function(e){var t=e.target,a=t.value;s(M({},o,Object(c.a)({},t.name,a)))},l=function(e){var t=e.target,a=t.value;a=u(t.name,a),s(M({},o,Object(c.a)({},t.name,a)))},d=function(e){var t=e.target,a=e.which||e.keyCode;"name"===t.name&&(a>=97&&a<=105||a>=48&&a<=57)?e.preventDefault():190!==e.keyCode&&110!==e.keyCode||!t.value.includes(".")?13===e.keyCode&&t.blur():e.preventDefault()};return n.a.createElement("div",{className:"user-item-inputs"},n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Name:"),n.a.createElement("input",{className:"bottom",autoComplete:"whatever",type:"text",name:"name",value:o.name||"",onChange:i,onBlur:l,onKeyDown:d,spellCheck:!1})),n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Paid:"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement("input",{className:"bottom",type:"number",name:"paid",value:o.paid||0,onChange:i,onBlur:l,onKeyDown:d})),n.a.createElement("div",{className:"grey-button-container",style:{marginBottom:"5px",justifyContent:"flex-end"}},n.a.createElement("div",{className:"grey-button tiny",onClick:function(){var e=u("paid",String(1/0));s(M({},o,{paid:+e}))}},"pay remaining total"),n.a.createElement("div",{style:{width:"20%"},className:"grey-button tiny",onClick:function(){var e=u("paid","0");s(M({},o,{paid:+e}))}}," ","clear paid")),n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Owes:"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement("input",{className:"bottom ".concat(o.isCustomOweAmt?"":"no-hover"),type:"number",name:"oweAmount",value:o.isCustomOweAmt?o.oweAmount:e.user.oweAmount||0,onChange:i,onBlur:l,onKeyDown:d,disabled:!o.isCustomOweAmt}),n.a.createElement("div",{className:"button"},n.a.createElement("img",{alt:"edit/clear",src:o.isCustomOweAmt?"/icons/remove.svg":"/icons/lock.svg",className:"arrowicon",onClick:function(){var t=!o.isCustomOweAmt;e.toggleCustOweAmt(t,e.user.uid),e.calcOweAmounts(e.total),s(M({},o,{isCustomOweAmt:t,oweAmount:e.user.oweAmount}))},title:o.isCustomOweAmt?"clear":"unlock to edit"}))))}));function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=function(e){var t=Object(r.useState)(!0),a=Object(m.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)(!1),u=Object(m.a)(c,2),i=u[0],l=u[1],d=function(){l(!1)};return Object(r.useEffect)((function(){e.user.name||s(!1)}),[]),n.a.createElement("div",{className:"user-item ".concat(function(){var t=e.user.oweAmount,a=e.user.paid,r=e.total;return(!!e.user.isCustomOweAmt||r>0)&&a>=t&&(a>0||t>0)}()?"debt-settled":"")},n.a.createElement("div",{className:"color-bar",style:{backgroundColor:e.user.color}}),n.a.createElement("div",{className:"no-edit".concat(o?" collapsed":"")},n.a.createElement("div",{className:"name greytext"},e.user.name||"Name"),n.a.createElement("div",{className:"amounts"},"Paid: $",e.user.paid),n.a.createElement("div",{className:"amounts"},"Owes: $",e.user.oweAmount),n.a.createElement("div",{className:"arrow",onClick:function(){return s(!o)}},n.a.createElement("img",{src:"/icons/down-arrow.png",alt:"open/close",className:"arrowicon".concat(o?"":" flip")}))),n.a.createElement("div",{className:"edits".concat(o?" collapsed":"")},n.a.createElement($,{user:J({},e.user)}),n.a.createElement("div",{className:"grey-button-container",style:{marginTop:"5px"}},n.a.createElement("div",{className:"grey-button tiny red",onClick:function(){e.user.name||e.user.paid||e.user.isCustomOweAmt&&e.user.oweAmount?l(!0):e.deleteUser()}},"Delete Person"))),i&&n.a.createElement(I,{yes:function(){e.deleteUser(),d()},no:function(){return d()},msg:"Delete ".concat(e.user.name?e.user.name:"person","?"),userItem:!0}))};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var X=function(e){var t=Object(r.useState)(!0),a=Object(m.a)(t,2),o=a[0],s=a[1],u=Object(r.useState)([]),i=Object(m.a)(u,2),l=i[0],d=i[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),f=b[0],O=b[1],v=Object(r.useState)(25),y=Object(m.a)(v,2),g=y[0],E=y[1];Object(r.useEffect)((function(){l.length&&f?f&&(!l.length||e.users[l[0].ownerUID]&&e.users[l[0].payToUID]||w(!0)):w(!0)}),[e.debts,e.users]);var j=function(e){var t=20*e+20;e||(t=35),t!==g&&E(t)},w=function(t){var a=[];if(Object.keys(e.debts).forEach((function(t){var r=S(e.users[t].name),n=e.users[t].color,o=e.debts[t].map((function(t){var a=S(e.users[t.payToUID].name);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{debtor:r,debtee:a,color:n})}));a=a.concat(o)})),!t)return a;f&&O(!1),d(a),j(a.length)},h=function(e){!e&&o?s(!1):e&&!o&&s(!0)},N=Object(r.useRef)(null);return e.initials.length?n.a.createElement("div",{className:"debts-and-bubbles"},n.a.createElement("div",{className:"user-bubbles"},e.initials.map((function(t,a){return n.a.createElement("div",{className:"bubble",style:{border:"1px solid ".concat(e.users[t.uid].color),backgroundColor:"#f4f4f4"},key:a+"init",onClick:function(){return function(e){if(o&&s(!1),f){var t=w(!1).filter((function(t){return t.ownerUID===e}));d(t),j(t.length)}else{O(!0);var a=l.filter((function(t){return t.ownerUID===e}));d(a),j(a.length)}}(t.uid)}},t.init?t.init:"na")})),n.a.createElement("div",{className:"grey-button-container",style:{width:"108px",margin:"2px"}},n.a.createElement("div",{className:"grey-button tiny",style:{width:"100%"},onClick:function(){w(!0),h(!1)}},"show all debts"))),n.a.createElement("div",{className:"debts ".concat(o?"collapsed":""),style:o?{}:{height:"".concat(g,"px")},ref:N},l.length?l.map((function(e){return n.a.createElement("div",{className:"debt",key:e.ownerUID+e.payToUID+e.amount},n.a.createElement("div",{style:{backgroundColor:e.color,borderRadius:"50%",width:"10px",height:"10px",marginRight:"8px"}}),e.debtor," : pay ",e.debtee," $",e.amount.toFixed(2))})):f?n.a.createElement("div",{className:"small-text"},"No individual debts."):n.a.createElement("div",{className:"small-text",style:{width:"80%",alignSelf:"flex-start",marginLeft:"12px"}},"Add paid amounts more than owed amounts to start building debts between users..."),n.a.createElement("div",{className:"closebutton"},n.a.createElement("img",{className:"iconbutton",src:"/icons/remove.svg",alt:"close section",onClick:function(){return h(!0)}})))):null};function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var V=Object(p.b)((function(e,t){return{users:e.users.users,debts:e.users.debts,total:e.totals.total,initials:e.users.initials}}),(function(e,t){return{addUser:Object(d.a)(P,e),deleteUser:Object(d.a)(D,e),setColors:Object(d.a)(k,e)}}))((function(e){var t=Object.keys(e.users).map((function(t){return e.users[t]})),a=Object(r.useState)(""),o=Object(m.a)(a,2),s=(o[0],o[1]);return n.a.createElement("div",{className:"bottom-half"},n.a.createElement(X,{users:e.users,debts:e.debts,initials:e.initials,total:e.total}),!!t.length&&t.map((function(t,a){return n.a.createElement(W,{setUserItem:s,key:t.uid,deleteUser:function(){return e.deleteUser(t.uid,e.total)},user:K({},t),total:e.total})})),n.a.createElement("div",{className:"user-item button",onClick:function(){return e.addUser(e.total)}},"add person"))}));function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z=Object(p.b)((function(e,t){return{totals:e.totals,users:e.users}}),(function(e,t){return{useLocalStorageTotals:Object(d.a)(y,e),useLocalStorageUsers:Object(d.a)(N,e)}}))((function(e){var t=Object(r.useState)("date not found"),a=Object(m.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)(!1),u=Object(m.a)(c,2),d=u[0],p=u[1],b=Object(r.useState)(!1),f=Object(m.a)(b,2),O=f[0],v=f[1],y=Object(r.useState)(""),g=Object(m.a)(y,2),E=g[0],w=g[1],h=Object(r.useState)("no data"),S=Object(m.a)(h,2),N=S[0],P=S[1],D=function(){localStorage.removeItem("divviweb"),s("date not found"),v(!1)};Object(r.useEffect)((function(){var e=localStorage.getItem("divviweb");if("string"===typeof e){P(e);var t=JSON.parse(e).date;s(j(t)),v(!0)}}),[]);var A=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C(),a=new Blob([t],{type:"application/json"}),r=document.createElement("a"),e.next=5,URL.createObjectURL(a);case 5:r.href=e.sent,r.download="backup.json",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var t={totals:q({},e.totals),users:q({},e.users),date:(new Date).getTime()};return JSON.stringify(t)};return window.onbeforeunload=function(){(d||Object.keys(e.users.users).length)&&localStorage.setItem("divviweb",C())},n.a.createElement("div",{className:"app"},O&&n.a.createElement(I,{yes:function(){if("no data"!==N){var t=JSON.parse(N),a=t.totals,r=t.users,n=Object.keys(a).length,o=Object.keys(e.totals).length,s=r.initials.length,c=Object.keys(r.users).length;if(n!==o||s!==c)return void w("Data corrupt");e.useLocalStorageTotals(a),e.useLocalStorageUsers(r),p(!0),D()}},no:D,msg:"Use session from ".concat(o,"?")}),E&&n.a.createElement("h1",null,E),n.a.createElement("div",{className:"app-card"},n.a.createElement("div",{className:"app-title"},"Divvi"),n.a.createElement(R,{formHasData:d,setFormHasData:function(e){return p(e)}}),n.a.createElement(V,null),d&&n.a.createElement("div",{style:{width:"100%",borderBottom:"1px solid #666666"}}),d&&n.a.createElement("div",{className:"small-text hover",onClick:A},"Export data to file"),n.a.createElement("input",{type:"file",id:"uploadfile",onChange:function(e){return function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(e){var t=e.target.result,a=JSON.parse(t).date;s(j(a)),P(t),v(!0)},a.readAsText(t)}(e)}}),n.a.createElement("label",{htmlFor:"uploadfile",className:"small-text hover",style:{paddingTop:"0px"}},"Upload saved data")))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e,t,a){var r=Z({},e.users[a.uid]);switch(t){case"name":r.name=a.name;break;case"oweAmount":r.oweAmount=+a.oweAmount;break;case"paid":r.paid=+a.paid;break;case"isCustomOweAmt":r.isCustomOweAmt=a.isCustomOweAmt}var n=Z({},e.users);return n[a.uid]=r,Z({},e,{users:n})},te=function(e,t){var a=Z({},e),r=Object.keys(e.users).map((function(t){return e.users[t]})),n=t-r.reduce((function(e,t){return t.isCustomOweAmt?e+Number(t.oweAmount):e+0}),0),o=r.filter((function(e){return!e.isCustomOweAmt}));return r.forEach((function(e){e.isCustomOweAmt||(a.users[e.uid].oweAmount=n>0?+(n/o.length).toFixed(2):0)})),a},ae=function(e){return Object.keys(e.users).map((function(t){return e.users[t]})).map((function(e){return{uid:e.uid,init:h(e.name)}}))},re=function(e,t){var a=Z({},e),r={},n=Object.keys(a.users),o=[],s=[];if(n.forEach((function(e){var t=Z({},a.users[e]);if(t.paid>t.oweAmount){var r=t.paid-t.oweAmount;o.push({owed:r,uid:t.uid})}else t.oweAmount>0&&t.paid<t.oweAmount&&s.push(t)})),!o.length)return Z({},a,{debts:{}});var c=function(e,t){r[t]?r[t].push(e):r[t]=[e]};return s.forEach((function(e){for(var t=e.oweAmount;t>0;){if(!o.length)return;var a=o[0].owed;if(t<=a){o[0].owed=a-t;var r={ownerUID:e.uid,payToUID:o[0].uid,amount:+t.toFixed(2)};c(r,e.uid),o[0].owed<=0&&o.shift(),t=0}else if(t>a){var n={ownerUID:e.uid,payToUID:o[0].uid,amount:+a.toFixed(2)};c(n,e.uid),t-=a,o.shift()}}})),a.debts=r,a},ne=function(e,t){var a=Object.keys(e.users),r=Z({},e),n=360/a.length;return t?r.users[t].color="hsla("+Math.floor(n%Math.floor(360*Math.random()))+", 90%, 60%,1)":a.forEach((function(e){r.users[e].color="hsla("+Math.floor(n%360)+", 90%, 60%,1)",n+=360/a.length})),r};function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ce={initials:[],users:{},debts:{}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"USERS_USE_LOCALSTORAGE":return se({},e,{},r);case"USERS_ADD":var n=se({},e.users);n[r.user.uid]=r.user;var o=se({},e,{users:n});o=te(o,r.total);var s=ae(o);return o=re(o,r.total),se({},o=ne(o),{initials:s});case"USERS_DELETE":var c=se({},e.users);delete c[r.uid];var u=se({},e,{users:c});u=te(u,r.total);var i=ae(u);return u=re(u,r.total),se({},u=ne(u),{initials:i});case"USERS_NAME":var l=ee(e,"name",r),m=ae(l);return se({},l,{initials:m});case"USERS_PAID":var d=ee(e,"paid",r);return se({},d=re(d,r.total));case"USERS_OWE":var p=ee(e,"oweAmount",r);return p=te(p,r.total),se({},p=re(p,r.total));case"USERS_TOGGLECUSTOWE":var b=ee(e,"isCustomOweAmt",r);return b=te(b,r.total),se({},b=re(b,r.total));case"CALC_OWES":var f=te(e,r.total);return se({},f=re(f,r.total));case"USERS_SETCOLORS":var O=ne(e);return se({},O);default:return e}};function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me={subtotal:0,tip:0,tax:0,total:0,useLS:!1},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"UPDATE_SUBTOTAL":return le({},e,{subtotal:+r.subtotal,total:+r.total});case"UPDATE_TIP":return le({},e,{tip:+r.tip,total:+r.total});case"UPDATE_TAX":return le({},e,{tax:+r.tax,total:+r.total});case"CLEAR_TIPTAX":return le({},e,{tip:0,tax:0,total:+e.subtotal});case"TOTALS_USE_LOCALSTORAGE":return le({},e,{},r,{useLS:!0});default:return e}},pe=Object(d.b)({users:ue,totals:de}),be=Object(d.c)(pe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(n.a.createElement(p.a,{store:be},n.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.24a193c7.chunk.js.map