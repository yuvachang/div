(this["webpackJsonpdivvi-web"]=this["webpackJsonpdivvi-web"]||[]).push([[0],{15:function(e,t,a){e.exports=a(26)},26:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),s=a.n(o),c=a(9),u=a.n(c),i=a(2),l=a(13),m=a(3),d=a(1),p=a(4),b=function(e,t){return{type:"UPDATE_SUBTOTAL",payload:{subtotal:e,total:t}}},f=function(){return{type:"CLEAR_TIPTAX"}},O=function(e,t){return{type:"UPDATE_TAX",payload:{tax:e,total:t}}},v=function(e,t){return{type:"UPDATE_TIP",payload:{tip:e,total:t}}},y=function(e){return{type:"TOTALS_USE_LOCALSTORAGE",payload:e}},g=function(e){return n.a.createElement("input",{className:e.disabled?"top no-hover":"top",type:"number",name:e.name,onChange:e.onChange,value:e.val,onBlur:e.updateStore,onKeyDown:function(e){var t=e.target,a=e.keyCode,r=t.value;190!==a&&110!==a||(console.log(r,"hello"),!r.includes("."))?8!==a&&46!==a&&(a<37||a>40&&a<48||a>57&&a<97||a>105&&a<110||a>110&&a<190||a>190)&&(e.preventDefault(),13===a&&t.blur()):e.preventDefault()},disabled:e.disabled})};g.defaultProps={disabled:!1,updateStore:function(){}};var E=g,j=function(e){return+(Math.round(100*+e)/100).toFixed(2)},w=function(e){var t=e.split(" ").filter((function(e){return!!e.length}));return t.length?1===t.length?t[0][0].toUpperCase():t[0][0].toUpperCase().concat(t[t.length-1][0].toUpperCase()):""},h=function(e){var t=e.trim().split(" ");return t[0].length>10&&(t[0]=t[0].slice(0,10)+"(...)"),t=t[0]+" "+w(t.join(" ")).slice(1)},S=function(e){return{type:"USERS_USE_LOCALSTORAGE",payload:e}},P=function(e){return{type:"USERS_ADD",payload:{user:{uid:Math.random().toString(36).substr(2,9),name:"",oweAmount:0,paid:0,isCustomOweAmt:!1},total:e}}},D=function(e,t){return{type:"USERS_DELETE",payload:{uid:e,total:t}}},N=function(e,t){return{type:"USERS_NAME",payload:{name:e,uid:t}}},A=function(e,t,a){return{type:"USERS_PAID",payload:{paid:e,uid:t,total:a}}},C=function(e,t,a){return{type:"USERS_OWE",payload:{oweAmount:e,uid:t,total:a}}},x=function(e,t){return{type:"USERS_TOGGLECUSTOWE",payload:{isCustomOweAmt:e,uid:t}}},U=function(e){return{type:"CALC_OWES",payload:{total:e}}},T=function(){return{type:"USERS_SETCOLORS",payload:null}};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=Object(p.b)((function(e,t){return{totals:e.totals}}),(function(e,t){return{updateSubTotal:Object(d.a)(b,e),updateTip:Object(d.a)(v,e),updateTax:Object(d.a)(O,e),clearTipTax:Object(d.a)(f,e),updateUserDebts:Object(d.a)(U,e)}}))((function(e){var t=Object(r.useState)(e.totals),a=Object(m.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)(!0),u=Object(m.a)(c,2),l=u[0],d=u[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),f=b[0],O=b[1],v=function(t){var a,r=t.target,n=r.value,c=r.name;if(+(n="subtotal"===c||"total"===c?+n>0?j(+n).toFixed(2):"0":String((a=+n,+(Math.round(10*+a)/10).toFixed(1))))===e.totals[c])s(_({},o,Object(i.a)({},c,n)));else{var u=_({},o);u[c]=n;var l=function(e){var t=e.tip,a=e.tax,r=e.subtotal,n=Number(t)/100*Number(r)+Number(a)/100*Number(r)+Number(r);return n>0?n.toFixed(2):"0"}(u);u.total=l,e.updateUserDebts(+l);var m=l===u.subtotal;switch(m||f?m&&f&&O(!1):O(!0),s(_({},u)),c){case"subtotal":e.updateSubTotal(n,l);break;case"tip":e.updateTip(n,l);break;case"tax":e.updateTax(n,l)}e.formHasData||e.setFormHasData(!0)}},y=function(e){var t=e.target,a=t.value;s(_({},o,Object(i.a)({},t.name,a)))};return Object(r.useEffect)((function(){e.totals.useLS&&(console.log("using LS data"),e.totals.total!==e.totals.subtotal&&O(!0),s(e.totals))}),[e.totals.useLS]),n.a.createElement("div",{className:"top-half"},n.a.createElement("div",null,n.a.createElement("div",{className:"segment"},n.a.createElement("p",null,l?"T":"Sub-t","otal"),n.a.createElement("div",{className:"symbol greytext"},"$"),l&&f?n.a.createElement(E,{name:"total",onChange:y,val:o?o.total:0,updateStore:v,disabled:!0}):n.a.createElement(E,{name:"subtotal",onChange:function(e){return y(e)},val:o?o.subtotal:0,updateStore:v}))),n.a.createElement("div",{className:"grey-button-container"},n.a.createElement("div",{className:"grey-button",onClick:function(){return d(!l)}},l?f?"edit amounts":"include tips & tax":"hide tips & tax")),n.a.createElement("div",{className:"total-details".concat(l?" collapsed":f?" include-clear-button":"")},n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Tip (",e.totals.subtotal>0&&e.totals.tip>0?"$".concat((e.totals.tip/100*e.totals.subtotal).toFixed(2)):"$0",")"),n.a.createElement("div",{className:"symbol right greytext"},"%"),n.a.createElement(E,{name:"tip",onChange:y,val:o?o.tip:0,updateStore:v})),n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Tax (",e.totals.subtotal>0&&e.totals.tax>0?"$".concat((e.totals.tax/100*e.totals.subtotal).toFixed(2)):"$0",")"),n.a.createElement("div",{className:"symbol right greytext"},"%"),n.a.createElement(E,{name:"tax",onChange:y,val:o?o.tax:0,updateStore:v})),f&&n.a.createElement("div",{className:"grey-button-container"},n.a.createElement("div",{className:"grey-button tiny",style:{width:"50%",height:"14px"},onClick:function(){var t;t=0;var a=_({},o,{tip:t,tax:0,total:o.subtotal});s(_({},o,{},a)),O(!1),e.clearTipTax()}},"clear tip & tax")),n.a.createElement("div",{className:"segment"},n.a.createElement("p",{className:"greytext"},"Total"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement(E,{name:"total",onChange:y,val:o?o.total:0,updateStore:v,disabled:!0}))))})),R=function(e){var t=e.yes,a=e.no,r=e.msg,o=e.userItem;return n.a.createElement("div",{className:o?"modal-user":"modal"},n.a.createElement("div",{className:"modal-center"},r,n.a.createElement("div",{className:"modal-buttons"},n.a.createElement("button",{onClick:t},"Yes"),n.a.createElement("button",{onClick:a},"No"))))};function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=Object(p.b)((function(e,t){return{total:e.totals.total,users:e.users.users}}),(function(e,t){return{updateName:Object(d.a)(N,e),updatePaid:Object(d.a)(A,e),updateUserOweAmt:Object(d.a)(C,e),toggleCustOweAmt:Object(d.a)(x,e),calcOweAmounts:Object(d.a)(U,e)}}))((function(e){var t=Object(r.useState)(F({},e.user)),a=Object(m.a)(t,2),o=a[0],s=a[1],c=function(t,a){switch(t){case"name":a=function(e){var t=e.split(" ").filter((function(e){return!!e.length}));return t.length?t.map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" "):""}(a),e.updateName(a,o.uid);break;case"paid":var r=Object.keys(e.users).filter((function(e){return e!==o.uid})).reduce((function(t,a){return t+e.users[a].paid}),0),n=e.total-r;+a>n&&(a=n.toFixed(2)),e.user.paid!==+a&&e.updatePaid(String(j(+a)),o.uid,e.total),a=j(+a).toFixed(2);break;case"oweAmount":e.updateUserOweAmt(String(j(+a)),o.uid,e.total),a=j(+a).toFixed(2)}return 0===+a?"name"===t?"":"0":a},u=function(e){var t=e.target,a=t.value;s(F({},o,Object(i.a)({},t.name,a)))},l=function(e){var t=e.target,a=t.value;a=c(t.name,a),s(F({},o,Object(i.a)({},t.name,a)))},d=function(e){var t=e.target,a=e.which||e.keyCode;"name"===t.name&&(a>=97&&a<=105||a>=48&&a<=57)?e.preventDefault():190!==e.keyCode&&110!==e.keyCode||!t.value.includes(".")?13===e.keyCode&&t.blur():e.preventDefault()};return n.a.createElement("div",{className:"user-item-inputs"},n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Name:"),n.a.createElement("input",{className:"bottom",autoComplete:"whatever",type:"text",name:"name",value:o.name||"",onChange:u,onBlur:l,onKeyDown:d,spellCheck:!1})),n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Paid:"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement("input",{className:"bottom",type:"number",name:"paid",value:o.paid||0,onChange:u,onBlur:l,onKeyDown:d})),n.a.createElement("div",{className:"grey-button-container",style:{marginBottom:"5px",justifyContent:"flex-end"}},n.a.createElement("div",{className:"grey-button tiny",onClick:function(){var e=c("paid",String(1/0));s(F({},o,{paid:+e}))}},"pay remaining total"),n.a.createElement("div",{style:{width:"20%"},className:"grey-button tiny",onClick:function(){var e=c("paid","0");s(F({},o,{paid:+e}))}}," ","clear paid")),n.a.createElement("div",{className:"segment"},n.a.createElement("div",{className:"title greytext"},"Owes:"),n.a.createElement("div",{className:"symbol greytext"},"$"),n.a.createElement("input",{className:"bottom ".concat(o.isCustomOweAmt?"":"no-hover"),type:"number",name:"oweAmount",value:o.isCustomOweAmt?o.oweAmount:e.user.oweAmount||0,onChange:u,onBlur:l,onKeyDown:d,disabled:!o.isCustomOweAmt}),n.a.createElement("div",{className:"button"},n.a.createElement("img",{alt:"edit/clear",src:o.isCustomOweAmt?"/icons/remove.svg":"/icons/edit.svg",className:"arrowicon",onClick:function(){var t=!o.isCustomOweAmt;e.toggleCustOweAmt(t,e.user.uid),e.calcOweAmounts(e.total),s(F({},o,{isCustomOweAmt:t,oweAmount:e.user.oweAmount}))},title:o.isCustomOweAmt?"clear":"edit"}))))}));function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var J=function(e){var t=Object(r.useState)(!0),a=Object(m.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)(!1),u=Object(m.a)(c,2),i=u[0],l=u[1],d=function(){l(!1)};return Object(r.useEffect)((function(){e.user.name||s(!1)}),[]),n.a.createElement("div",{className:"user-item ".concat(function(){var t=e.user.oweAmount,a=e.user.paid,r=e.total;return(!!e.user.isCustomOweAmt||r>0)&&a>=t&&(a>0||t>0)}()?"debt-settled":"")},n.a.createElement("div",{className:"color-bar",style:{backgroundColor:e.user.color}}),n.a.createElement("div",{className:"no-edit".concat(o?" collapsed":"")},n.a.createElement("div",{className:"name greytext"},e.user.name||"Name"),n.a.createElement("div",{className:"amounts"},"Paid: $",e.user.paid),n.a.createElement("div",{className:"amounts"},"Owes: $",e.user.oweAmount),n.a.createElement("div",{className:"arrow",onClick:function(){return s(!o)}},n.a.createElement("img",{src:"/icons/down-arrow.png",alt:"open/close",className:"arrowicon".concat(o?"":" flip")}))),n.a.createElement("div",{className:"edits".concat(o?" collapsed":"")},n.a.createElement(M,{user:B({},e.user)}),n.a.createElement("div",{className:"grey-button-container",style:{marginTop:"5px"}},n.a.createElement("div",{className:"grey-button tiny red",onClick:function(){e.user.name||e.user.paid||e.user.isCustomOweAmt&&e.user.oweAmount?l(!0):e.deleteUser()}},"Delete Person"))),i&&n.a.createElement(R,{yes:function(){e.deleteUser(),d()},no:function(){return d()},msg:"Delete ".concat(e.user.name?e.user.name:"person","?"),userItem:!0}))};function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var G=function(e){var t=Object(r.useState)(!0),a=Object(m.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)([]),u=Object(m.a)(c,2),l=u[0],d=u[1],p=Object(r.useState)(!1),b=Object(m.a)(p,2),f=b[0],O=b[1],v=Object(r.useState)(25),y=Object(m.a)(v,2),g=y[0],E=y[1];Object(r.useEffect)((function(){l.length&&f?f&&(!l.length||e.users[l[0].ownerUID]&&e.users[l[0].payToUID]||w(!0)):w(!0)}),[e.debts,e.users]);var j=function(e){var t=20*e+20;e||(t=35),t!==g&&E(t)},w=function(t){var a=[];if(Object.keys(e.debts).forEach((function(t){var r=h(e.users[t].name),n=e.users[t].color,o=e.debts[t].map((function(t){var a=h(e.users[t.payToUID].name);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{debtor:r,debtee:a,color:n})}));a=a.concat(o)})),!t)return a;f&&O(!1),d(a),j(a.length)},S=function(e){!e&&o?s(!1):e&&!o&&s(!0)},P=Object(r.useRef)(null);return e.initials.length?n.a.createElement("div",{className:"debts-and-bubbles"},n.a.createElement("div",{className:"user-bubbles"},e.initials.map((function(t,a){return n.a.createElement("div",{className:"bubble",style:{border:"1px solid ".concat(e.users[t.uid].color),backgroundColor:"#f4f4f4"},key:a+"init",onClick:function(){return function(e){if(o&&s(!1),f){var t=w(!1).filter((function(t){return t.ownerUID===e}));d(t),j(t.length)}else{O(!0);var a=l.filter((function(t){return t.ownerUID===e}));d(a),j(a.length)}}(t.uid)}},t.init?t.init:"na")})),n.a.createElement("div",{className:"small-text hover",onClick:function(){w(!0),S(!1)}},"show all debts")),n.a.createElement("div",{className:"debts ".concat(o?"collapsed":""),style:o?{}:{height:"".concat(g,"px")},ref:P},l.length?l.map((function(e){return n.a.createElement("div",{className:"debt",key:e.ownerUID+e.payToUID+e.amount},n.a.createElement("div",{style:{backgroundColor:e.color,borderRadius:"50%",width:"10px",height:"10px",marginRight:"8px"}}),e.debtor," : pay ",e.debtee," $",e.amount.toFixed(2))})):f?n.a.createElement("div",{className:"small-text"},"No individual debts."):n.a.createElement("div",{className:"small-text",style:{width:"80%",alignSelf:"flex-start",marginLeft:"12px"}},"Add paid amounts more than owed amounts to start building debts between users..."),n.a.createElement("div",{className:"closebutton"},n.a.createElement("img",{className:"iconbutton",src:"/icons/remove.svg",alt:"close section",onClick:function(){return S(!0)}})))):null};function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=Object(p.b)((function(e,t){return{users:e.users.users,debts:e.users.debts,total:e.totals.total,initials:e.users.initials}}),(function(e,t){return{addUser:Object(d.a)(P,e),deleteUser:Object(d.a)(D,e),setColors:Object(d.a)(T,e)}}))((function(e){var t=Object.keys(e.users).map((function(t){return e.users[t]})),a=Object(r.useState)(""),o=Object(m.a)(a,2),s=(o[0],o[1]);return n.a.createElement("div",{className:"bottom-half"},n.a.createElement(G,{users:e.users,debts:e.debts,initials:e.initials,total:e.total}),!!t.length&&t.map((function(t,a){return n.a.createElement(J,{setUserItem:s,key:t.uid,deleteUser:function(){return e.deleteUser(t.uid,e.total)},user:H({},t),total:e.total})})),n.a.createElement("div",{className:"user-item button",onClick:function(){return e.addUser(e.total)}},"add person"))}));function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=Object(p.b)((function(e,t){return{totals:e.totals,users:e.users}}),(function(e,t){return{useLocalStorageTotals:Object(d.a)(y,e),useLocalStorageUsers:Object(d.a)(S,e)}}))((function(e){var t=Object(r.useState)("date not found"),a=Object(m.a)(t,2),o=a[0],s=a[1],c=Object(r.useState)(!1),i=Object(m.a)(c,2),d=i[0],p=i[1],b=Object(r.useState)(!1),f=Object(m.a)(b,2),O=f[0],v=f[1],y=Object(r.useState)(""),g=Object(m.a)(y,2),E=g[0],j=g[1],w=Object(r.useState)("no data"),h=Object(m.a)(w,2),S=h[0],P=h[1],D=function(){localStorage.removeItem("divviweb"),s("date not found"),v(!1)};Object(r.useEffect)((function(){var e=localStorage.getItem("divviweb");if("string"===typeof e){P(e);var t=JSON.parse(e).date;s(function(e){var t=new Date(e),a=["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"][t.getDay()],r="".concat(t.getDate());1===r.length&&(r=r.padStart(2,"0"));var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o="".concat(t.getFullYear());return"".concat(a," ").concat(n," ").concat(r," ").concat(o)}(t)),v(!0)}}),[]);var N=function(){var t=Object(l.a)(u.a.mark((function t(a){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.stringify({totals:Y({},e.totals),users:Y({},e.users)}),r=new Blob([a],{type:"application/json"}),n=document.createElement("a"),t.next=5,URL.createObjectURL(r);case 5:n.href=t.sent,n.download="backup.json",document.body.appendChild(n),n.click(),document.body.removeChild(n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return window.onbeforeunload=function(){if(d||Object.keys(e.users.users).length){var t=(new Date).getTime(),a={totals:Y({},e.totals),users:Y({},e.users),date:t},r=JSON.stringify(a);localStorage.setItem("divviweb",r)}},n.a.createElement("div",{className:"app"},O&&n.a.createElement(R,{yes:function(){if("no data"!==S){var t=JSON.parse(S),a=t.totals,r=t.users,n=Object.keys(a).length,o=Object.keys(e.totals).length,s=r.initials.length,c=Object.keys(r.users).length;if(n!==o||s!==c)return void j("Data corrupt");e.useLocalStorageTotals(a),e.useLocalStorageUsers(r),p(!0),D()}},no:D,msg:"Use unfinished session from ".concat(o,"?")}),E&&n.a.createElement("h1",null,E),n.a.createElement("div",{className:"app-card"},n.a.createElement("div",{className:"app-title"},"Divvi"),n.a.createElement(L,{formHasData:d,setFormHasData:function(e){return p(e)}}),n.a.createElement(K,null),d&&n.a.createElement("div",{style:{width:"100%",borderBottom:"1px solid #666666"}}),d&&n.a.createElement("div",{className:"small-text hover",onClick:N},"Export data to file")))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=function(e,t,a){var r=Q({},e.users[a.uid]);switch(t){case"name":r.name=a.name;break;case"oweAmount":r.oweAmount=+a.oweAmount;break;case"paid":r.paid=+a.paid;break;case"isCustomOweAmt":r.isCustomOweAmt=a.isCustomOweAmt}var n=Q({},e.users);return n[a.uid]=r,Q({},e,{users:n})},ee=function(e,t){var a=Q({},e),r=Object.keys(e.users).map((function(t){return e.users[t]})),n=t-r.reduce((function(e,t){return t.isCustomOweAmt?e+Number(t.oweAmount):e+0}),0),o=r.filter((function(e){return!e.isCustomOweAmt}));return r.forEach((function(e){e.isCustomOweAmt||(a.users[e.uid].oweAmount=n>0?+(n/o.length).toFixed(2):0)})),a},te=function(e){return Object.keys(e.users).map((function(t){return e.users[t]})).map((function(e){return{uid:e.uid,init:w(e.name)}}))},ae=function(e,t){var a=Q({},e),r={},n=Object.keys(a.users),o=[],s=[];if(n.forEach((function(e){var t=Q({},a.users[e]);if(t.paid>t.oweAmount){var r=t.paid-t.oweAmount;o.push({owed:r,uid:t.uid})}else t.oweAmount>0&&t.paid<t.oweAmount&&s.push(t)})),!o.length)return Q({},a,{debts:{}});var c=function(e,t){r[t]?r[t].push(e):r[t]=[e]};return s.forEach((function(e){for(var t=e.oweAmount;t>0;){if(!o.length)return;var a=o[0].owed;if(t<=a){o[0].owed=a-t;var r={ownerUID:e.uid,payToUID:o[0].uid,amount:+t.toFixed(2)};c(r,e.uid),o[0].owed<=0&&o.shift(),t=0}else if(t>a){var n={ownerUID:e.uid,payToUID:o[0].uid,amount:+a.toFixed(2)};c(n,e.uid),t-=a,o.shift()}}})),a.debts=r,a},re=function(e,t){var a=Object.keys(e.users),r=Q({},e),n=360/a.length;return t?r.users[t].color="hsla("+Math.floor(n%Math.floor(360*Math.random()))+", 90%, 60%,1)":a.forEach((function(e){r.users[e].color="hsla("+Math.floor(n%360)+", 90%, 60%,1)",n+=360/a.length})),r};function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var se={initials:[],users:{},debts:{}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"USERS_USE_LOCALSTORAGE":return oe({},e,{},r);case"USERS_ADD":var n=oe({},e.users);n[r.user.uid]=r.user;var o=oe({},e,{users:n});o=ee(o,r.total);var s=te(o);return o=ae(o,r.total),oe({},o=re(o),{initials:s});case"USERS_DELETE":var c=oe({},e.users);delete c[r.uid];var u=oe({},e,{users:c});u=ee(u,r.total);var i=te(u);return u=ae(u,r.total),oe({},u=re(u),{initials:i});case"USERS_NAME":var l=Z(e,"name",r),m=te(l);return oe({},l,{initials:m});case"USERS_PAID":var d=Z(e,"paid",r);return oe({},d=ae(d,r.total));case"USERS_OWE":var p=Z(e,"oweAmount",r);return p=ee(p,r.total),oe({},p=ae(p,r.total));case"USERS_TOGGLECUSTOWE":var b=Z(e,"isCustomOweAmt",r);return b=ee(b,r.total),oe({},b=ae(b,r.total));case"CALC_OWES":var f=ee(e,r.total);return oe({},f=ae(f,r.total));case"USERS_SETCOLORS":var O=re(e);return oe({},O);default:return e}};function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(a,!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var le={subtotal:0,tip:0,tax:0,total:0,useLS:!1},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"UPDATE_SUBTOTAL":return ie({},e,{subtotal:+r.subtotal,total:+r.total});case"UPDATE_TIP":return ie({},e,{tip:+r.tip,total:+r.total});case"UPDATE_TAX":return ie({},e,{tax:+r.tax,total:+r.total});case"CLEAR_TIPTAX":return ie({},e,{tip:0,tax:0,total:+e.subtotal});case"TOTALS_USE_LOCALSTORAGE":return ie({},e,{},r,{useLS:!0});default:return e}},de=Object(d.b)({users:ce,totals:me}),pe=Object(d.c)(de,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(n.a.createElement(p.a,{store:pe},n.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.5841c2b4.chunk.js.map